function innitComponents(){$cap=document.querySelectorAll(".item"),identificator=[],$.each($cap,function(i){this.ondragstart=inicia,this.ondragleave=fin,this.ondragover=encima,this.ondrop=suelta,identificator.push({id:parseInt($(this).attr("id"))})});for(i in identificator)for(j in borrar)identificator[i].id==borrar[j].id&&identificator.splice(i,1)}function inicia(i){i.dataTransfer.effectAllowed="move";var t=$(this),e=t.attr("id");active=t.index(),i.dataTransfer.setData("i",active),i.dataTransfer.setData("id",e),copy=t.clone()}function suelta(i){i.preventDefault(),i.stopPropagation();var t=$(this),e=t.index(),a=parseInt(i.dataTransfer.getData("i"));i.dataTransfer.getData("id"),t.attr("id");if(e===a)return!1;t.removeClass("capitulo_hover"),$cap[a].remove(),a<e?copy.insertAfter($cap[e]):a>e&&copy.insertBefore($cap[e]),innitComponents();var n=[];for(var r in identificator){$(".number_cap_"+parseInt(identificator[r].id)).html("Capitulo "+(parseInt(r)+1)+": ");var o={id:r,identificador:identificator[r].id};n.push(o)}ajax(url,{object:JSON.stringify(n),type:"orden_capitulos"},function(i){success(i.status)},"Json")}function encima(i){i.dataTransfer.dropEffect="move";var t=$(this);return t.index()!==active&&(t.addClass("capitulo_hover"),!1)}function fin(i){var t=$(this);t.removeClass("capitulo_hover")}function cap_delete_yes(i,t){document.getElementById("cap_delete_"+i).innerHTML='<div class="cargando_line"><img src="/img/cargando.gif"></div>',borrar.push({id:i}),innitComponents();for(n in identificator){var e=ie();if(e<=8)for(var a=getElementsByClassName("number_cap_"+parseInt(identificator[n].id)),n=0;n<a.length;n++)a[n].innerHTML="Capitulo "+(parseInt(n)+1)+": ";else document.querySelector(".number_cap_"+parseInt(identificator[n].id)).innerHTML="Capitulo "+(parseInt(n)+1)+": "}ajax(url,{id:i,id_curso:t,type:"cap_delete"},function(t){document.getElementById(i).style.display="none",success(t.status)},"Json")}function reinicio(){innitComponents()}var $cap,active,copy,identificator=[],borrar=[];borrar.push({id:0});var url="include/server_admin.php";docReady(function(){innitComponents()});